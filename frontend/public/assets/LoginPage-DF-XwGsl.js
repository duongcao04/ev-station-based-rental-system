import{u as l,a as g,b as k,c as w,d as y,j as e,e as S,C as z,f as C,l as T,L as h,I as x,B as E,o as M,s as m,g as I,r as B,t as F}from"../firebase-messaging-sw.js";const L=M({username:m().min(1,"Tài khoản là email hoặc số điện thoại"),password:m().min(6,"Mật khẩu phải có ít nhất 6 kí tự")});function P({className:a,...r}){const n=l(s=>s.signIn),p=g(),c=k(),{register:d,handleSubmit:u,formState:{errors:i,isSubmitting:f}}=w({resolver:y(L)}),b=async s=>{const{username:j,password:v}=s;if(!await n(j,v))return;await new Promise(N=>setTimeout(N,100));const o=l.getState().user;if(!o||!o.role){console.error("User data not available after login");return}c&&c.invalidateQueries({queryKey:["profile"]});let t="/";switch(o.role){case"admin":t="/dashboard";break;case"staff":t="/dashboard";break;case"renter":t="/";break;default:t="/"}p(t,{replace:!0})};return e.jsxs("div",{className:S("flex flex-col gap-6",a),...r,children:[e.jsx(z,{className:"overflow-hidden p-0 border-border",children:e.jsxs(C,{className:"grid p-0 md:grid-cols-2",children:[e.jsx("form",{className:"p-6 md:p-8",onSubmit:u(b),children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("a",{href:"/",className:"mx-auto block w-fit text-center",children:[e.jsx("div",{className:"mx-auto block w-fit text-center",style:{width:"70px",height:"70px",borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 25px rgba(5, 150, 105, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",position:"relative",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:s=>{s.currentTarget.style.transform="scale(1.05)",s.currentTarget.style.boxShadow="0 12px 35px rgba(5, 150, 105, 0.3)"},onMouseLeave:s=>{s.currentTarget.style.transform="scale(1)",s.currentTarget.style.boxShadow="0 8px 25px rgba(5, 150, 105, 0.2)"},children:e.jsx("img",{src:T,alt:"EV Station Logo",style:{width:"50px",height:"50px",objectFit:"contain",filter:"brightness(0) invert(1)"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"32px",fontWeight:"800",color:"#1f2937",margin:0,lineHeight:"1.1",background:"linear-gradient(135deg, #059669 0%, #10b981 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"EV Station"}),e.jsx("p",{style:{fontSize:"14px",color:"#6b7280",fontWeight:"500",margin:"0",marginTop:"2px",letterSpacing:"0.5px"},children:"Thuê xe điện chuyên nghiệp"})]})]}),e.jsx("div",{className:"grid grid-cols gap-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"username",className:"block text-sm",children:"Tài khoản"}),e.jsx(x,{type:"text",id:"username",placeholder:"Email hoặc số điện thoại",...d("username")}),i.username&&e.jsx("p",{className:"text-destructive text-sm",children:i.username.message})]})}),e.jsx("div",{className:"grid grid-cols gap-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"password",className:"block text-sm",children:"Mật khẩu"}),e.jsx(x,{type:"password",id:"password",placeholder:"******",...d("password")}),i.password&&e.jsx("p",{className:"text-destructive text-sm",children:i.password.message})]})}),e.jsx(E,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white",disabled:f,children:"Đăng nhập"}),e.jsxs("div",{className:"text-center text-sm",children:["Chưa có tài khoản?"," ",e.jsx("a",{href:"/register",className:"underline underline-offset-4",children:"Đăng ký"})]})]})}),e.jsx("div",{className:"bg-muted relative hidden md:block",children:e.jsx("img",{src:"https://images.pexels.com/photos/32716427/pexels-photo-32716427.jpeg?cs=srgb&dl=pexels-hyundaimotorgroup-32716427.jpg&fm=jpg&_gl=1*1hmii7e*_ga*MTkyMTM0MjMzNC4xNzYyMzc1Nzk3*_ga_8JE65Q40S6*czE3NjIzNzU3OTckbzEkZzEkdDE3NjIzNzU5MjckajYwJGwwJGgw",alt:"Image",className:"absolute top-1/2 -translate-y-1/2 object-cover"})})]})}),e.jsxs("div",{className:"text-xs text-balance px-6 text-center *:[a]:hover:text-primary text-muted-foreground *:[a]:underline *:[a]:underline-offset-4",children:["Bằng cách tiếp tục, Bạn đồng ý với ",e.jsx("a",{href:"#",children:"Chính sách"})," và"," ",e.jsx("a",{href:"#",children:"Điều khoản"})," của chúng tôi."]})]})}const _=()=>{const a=g(),{data:r}=I(),{user:n}=l();return B.useEffect(()=>{(r||n)&&(F("Bạn đã đăng nhập",{description:"Quay trở lại trang chủ"}),a("/",{replace:!0}))},[r,n,a]),e.jsx("div",{className:"bg-muted flex min-h-svh flex-col items-center justify-center p-6 md:p-10 absolute inset-0 z-0 bg-linear-to-br from-green-50 to-blue-50 py-20",children:e.jsx("div",{className:"w-full max-w-sm md:max-w-4xl",children:e.jsx(P,{})})})};export{_ as default};
